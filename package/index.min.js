!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("@firestitch/file",[],t):"object"==typeof exports?exports["@firestitch/file"]=t():e["@firestitch/file"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s="./index.ts")}({"../node_modules/css-loader/index.js??ref--3-1!../node_modules/postcss-loader/lib/index.js??ref--3-2!../node_modules/resolve-url-loader/index.js??ref--3-3!../node_modules/sass-loader/lib/loader.js??ref--3-4!./components/fs-file-picker/fs-file-picker.component.scss":function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!0),t.push([e.i,':host.dragover .select {\n  border: 2px #07a8e6 dashed;\n  color: #07a8e6;\n}\n\n:host.dragover .select button {\n  display: none;\n}\n\n:host.dragover .select .mat-icon {\n  color: #07a8e6;\n}\n\n:host.dragover ::ng-deep .preview-container:after {\n  content: "";\n  width: 98%;\n  display: block;\n  height: 98%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border: 2px #07a8e6 dashed;\n  background: #07a8e6;\n  opacity: 0.4;\n}\n\n.select {\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  width: 150px;\n  height: 150px;\n  display: table-cell;\n  vertical-align: middle;\n  padding: 10px;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n\n.select mat-icon {\n  -webkit-transform: scale(1.8);\n          transform: scale(1.8);\n  color: #ddd;\n}\n\n.instruction {\n  font-size: 12px;\n  padding: 8px 0;\n}\n\n.label {\n  -webkit-transform: scale(0.75) translateZ(0.001px);\n          transform: scale(0.75) translateZ(0.001px);\n  -webkit-transform-origin: 0 0;\n          transform-origin: 0 0;\n}\n\n',"",{version:3,sources:["/Users/mendor/work/fs-file/src/components/fs-file-picker/src/components/fs-file-picker/fs-file-picker.component.scss","/Users/mendor/work/fs-file/src/components/fs-file-picker/fs-file-picker.component.scss"],names:[],mappings:"AAAA;EAGM,2BAAA;EACA,eAAA;CCDL;;ADHD;EAOQ,cAAA;CCAP;;ADPD;EAWQ,eAAA;CCAP;;ADXD;EAiBU,YAAA;EACA,WAAA;EACA,eAAA;EACA,YAAA;EACA,mBAAA;EACA,QAAA;EACA,OAAA;EACA,2BAAA;EACA,oBAAA;EACA,aAAA;CCFT;;ADSD;EACE,mBAAA;EACA,uBAAA;EACA,mBAAA;EACA,aAAA;EACA,cAAA;EACA,oBAAA;EACA,uBAAA;EACA,cAAA;EACA,yBAAA;MAAA,sBAAA;UAAA,wBAAA;EACA,6BAAA;EAAA,8BAAA;MAAA,2BAAA;UAAA,uBAAA;EACA,+BAAA;UAAA,uBAAA;CCND;;ADLD;EAeI,8BAAA;UAAA,sBAAA;EACA,YAAA;CCNH;;ADUD;EACE,gBAAA;EACA,eAAA;CCPD;;ADUD;EACE,mDAAA;UAAA,2CAAA;EACA,8BAAA;UAAA,sBAAA;CCPD",file:"fs-file-picker.component.scss",sourcesContent:[':host {\n  &.dragover {\n    .select {\n      border: 2px #07a8e6 dashed;\n      color: #07a8e6;\n\n      button {\n        display: none;\n      }\n\n      .mat-icon {\n        color: #07a8e6;\n      }\n    }\n    ::ng-deep {\n      .preview-container {\n        &:after {\n          content: "";\n          width: 98%;\n          display: block;\n          height: 98%;\n          position: absolute;\n          left: 0;\n          top: 0;\n          border: 2px #07a8e6 dashed;\n          background: #07a8e6;\n          opacity: 0.4;\n        }\n      }\n    }\n  }\n}\n\n.select {\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  width: 150px;\n  height: 150px;\n  display: table-cell;\n  vertical-align: middle;\n  padding: 10px;\n  justify-content: center;\n  flex-direction: column;\n  box-sizing: border-box;\n\n\n  mat-icon {\n    transform: scale(1.8);\n    color: #ddd;\n  }\n}\n\n.instruction {\n  font-size: 12px;\n  padding: 8px 0;\n}\n\n.label {\n  transform: scale(.75) translateZ(.001px);\n  transform-origin: 0 0;\n}\n',':host.dragover .select {\n  border: 2px #07a8e6 dashed;\n  color: #07a8e6;\n}\n\n:host.dragover .select button {\n  display: none;\n}\n\n:host.dragover .select .mat-icon {\n  color: #07a8e6;\n}\n\n:host.dragover ::ng-deep .preview-container:after {\n  content: "";\n  width: 98%;\n  display: block;\n  height: 98%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  border: 2px #07a8e6 dashed;\n  background: #07a8e6;\n  opacity: 0.4;\n}\n\n.select {\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  width: 150px;\n  height: 150px;\n  display: table-cell;\n  vertical-align: middle;\n  padding: 10px;\n  justify-content: center;\n  flex-direction: column;\n  box-sizing: border-box;\n}\n\n.select mat-icon {\n  transform: scale(1.8);\n  color: #ddd;\n}\n\n.instruction {\n  font-size: 12px;\n  padding: 8px 0;\n}\n\n.label {\n  transform: scale(0.75) translateZ(0.001px);\n  transform-origin: 0 0;\n}\n\n'],sourceRoot:""}])},"../node_modules/css-loader/index.js??ref--3-1!../node_modules/postcss-loader/lib/index.js??ref--3-2!../node_modules/resolve-url-loader/index.js??ref--3-3!../node_modules/sass-loader/lib/loader.js??ref--3-4!./components/fs-file-preview/fs-file-preview.component.scss":function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!0),t.push([e.i,".file-ext {\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  padding: 15px 0;\n  font-size: 25px;\n}\n\n.file-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0 5px;\n  font-size: 12px;\n  text-align: center;\n}\n\n.actions {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n\n@media only screen and (max-width: 767.98px) {\n  .actions {\n    display: block;\n  }\n}\n\n@media only screen and (min-width: 768px) {\n  .actions {\n    display: none;\n    background: rgba(0, 0, 0, .5);\n  }\n}\n\n.actions .action {\n  position: absolute;\n  cursor: pointer;\n}\n\n.actions .action.top-left {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.top-right {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.bottom-left {\n  bottom: 5%;\n  left: 5%;\n}\n\n.actions .action.bottom-right {\n  bottom: 5%;\n  right: 5%;\n}\n\n.actions .action.mat-mini-fab {\n  width: 22%;\n  height: 22%;\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 42px;\n  max-height: 42px;\n  line-height: 15px !important;\n}\n\n.actions .action.mat-mini-fab .mat-button-wrapper {\n  padding: 4px 0;\n  line-height: 15px !important;\n}\n\n:host:hover .file-name {\n  overflow: visible;\n  white-space: normal;\n  word-wrap: break-word;\n}\n\n:host.preview {\n  display: inline-block;\n  position: relative;\n  margin-right: 10px;\n  border: 1px #DDD solid;\n  vertical-align: top;\n  border-radius: 3px;\n}\n\n:host.preview:last-child {\n  margin-right: 0;\n}\n\n:host.preview:hover .actions,\n:host.preview:focus .actions {\n  display: block;\n}\n\n:host.preview img {\n  display: block;\n  border-radius: 3px;\n  -o-object-fit: cover;\n     object-fit: cover;\n  width: 100%;\n  height: 100%;\n}\n\n:host ::ng-deep .mat-button-wrapper {\n  padding: 0;\n  line-height: 15px !important;\n}\n\n:host ::ng-deep .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -25%;\n  margin-top: -25%;\n}\n\n@media only screen and (max-width: 550px) {\n  .actions {\n    display: block;\n    background: none;\n  }\n}\n\n","",{version:3,sources:["/Users/mendor/work/fs-file/src/components/fs-file-preview/src/components/fs-file-preview/fs-file-preview.component.scss","/Users/mendor/work/fs-file/src/components/fs-file-preview/fs-file-preview.component.scss","/Users/mendor/work/fs-file/src/components/fs-file-preview/src/styles/_mixins.scss"],names:[],mappings:"AAEA;EACE,kBAAA;EACA,mBAAA;EACA,0BAAA;EACA,gBAAA;EACA,gBAAA;CCDD;;ADID;EACE,oBAAA;EACA,iBAAA;EACA,wBAAA;EACA,eAAA;EACA,gBAAA;EACA,mBAAA;CCDD;;ADID;EACE,mBAAA;EAWA,YAAA;EACA,aAAA;EACA,OAAA;EACA,QAAA;CCXD;;ACSC;EFbF;IAII,eAAA;GCKD;CACF;;ACGC;EFbF;IAQI,cAAA;IACA,8BAAA;GCOD;CACF;;ADAC;EAEE,mBAAA;EACA,gBAAA;CCEH;;ADtBD;EAuBM,QAAA;EACA,UAAA;CCGL;;ADAG;EACE,QAAA;EACA,UAAA;CCGL;;ADAG;EACE,WAAA;EACA,SAAA;CCGL;;ADAG;EACE,WAAA;EACA,UAAA;CCGL;;ADAG;EACE,WAAA;EACA,YAAA;EACA,gBAAA;EACA,iBAAA;EACA,gBAAA;EACA,iBAAA;EACA,6BAAA;CCGL;;ADpDD;EAoDQ,eAAA;EACA,6BAAA;CCIP;;ADED;EAEI,kBAAA;EACA,oBAAA;EACA,sBAAA;CCAH;;ADJD;EAQI,sBAAA;EACA,mBAAA;EACA,mBAAA;EACA,uBAAA;EACA,oBAAA;EACA,mBAAA;CCAH;;ADbD;EAgBM,gBAAA;CCCL;;ADGK;;EACE,eAAA;CCCP;;ADGG;EACE,eAAA;EACA,mBAAA;EACA,qBAAA;KAAA,kBAAA;EACA,YAAA;EACA,aAAA;CCAL;;ADMD;EAEI,WAAA;EACA,6BAAA;CCJH;;ADOC;EACE,mBAAA;EACA,SAAA;EACA,UAAA;EACA,kBAAA;EACA,iBAAA;CCJH;;ADQD;EACE;IACI,eAAA;IACA,iBAAA;GCLH;CACF",file:"fs-file-preview.component.scss",sourcesContent:['@import "../../styles/mixins";\n\n.file-ext {\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  padding: 15px 0;\n  font-size: 25px;\n}\n\n.file-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0 5px;\n  font-size: 12px;\n  text-align: center;\n}\n\n.actions {\n  position: absolute;\n\n  @include apply-to(less-than, phone) {\n    display: block;\n  }\n\n  @include apply-to(greater-than, phone) {\n    display: none;\n    background: rgba(0, 0, 0, 0.5);\n  }\n\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n\n  .action {\n\n    position: absolute;\n    cursor: pointer;\n\n    &.top-left {\n      top: 5%;\n      right: 5%;\n    }\n\n    &.top-right {\n      top: 5%;\n      right: 5%;\n    }\n\n    &.bottom-left {\n      bottom: 5%;\n      left: 5%;\n    }\n\n    &.bottom-right {\n      bottom: 5%;\n      right: 5%;\n    }\n\n    &.mat-mini-fab {\n      width: 22%;\n      height: 22%;\n      min-width: 30px;\n      min-height: 30px;\n      max-width: 42px;\n      max-height: 42px;\n      line-height: 15px !important;\n\n      .mat-button-wrapper {\n        padding: 4px 0;\n        line-height: 15px !important;\n      }\n    }\n  }\n}\n\n:host {\n  &:hover .file-name {\n    overflow: visible;\n    white-space: normal;\n    word-wrap: break-word;\n  }\n\n  &.preview {\n    display: inline-block;\n    position: relative;\n    margin-right: 10px;\n    border: 1px #DDD solid;\n    vertical-align: top;\n    border-radius: 3px;\n\n    &:last-child {\n      margin-right: 0;\n    }\n\n    &:hover, &:focus {\n      .actions {\n        display: block;\n      }\n    }\n\n    img {\n      display: block;\n      border-radius: 3px;\n      object-fit: cover;\n      width: 100%;\n      height: 100%;\n    }\n  }\n\n}\n\n:host ::ng-deep {\n  .mat-button-wrapper {\n    padding: 0;\n    line-height: 15px !important;\n  }\n\n  .spinner {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    margin-left: -25%;\n    margin-top: -25%;\n  }\n}\n\n@media only screen and (max-width: 550px) {\n  .actions {\n      display: block;\n      background: none;\n  }\n}\n',".file-ext {\n  font-weight: bold;\n  text-align: center;\n  text-transform: uppercase;\n  padding: 15px 0;\n  font-size: 25px;\n}\n\n.file-name {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  padding: 0 5px;\n  font-size: 12px;\n  text-align: center;\n}\n\n.actions {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n}\n\n@media only screen and (max-width: 767.98px) {\n  .actions {\n    display: block;\n  }\n}\n\n@media only screen and (min-width: 768px) {\n  .actions {\n    display: none;\n    background: rgba(0, 0, 0, 0.5);\n  }\n}\n\n.actions .action {\n  position: absolute;\n  cursor: pointer;\n}\n\n.actions .action.top-left {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.top-right {\n  top: 5%;\n  right: 5%;\n}\n\n.actions .action.bottom-left {\n  bottom: 5%;\n  left: 5%;\n}\n\n.actions .action.bottom-right {\n  bottom: 5%;\n  right: 5%;\n}\n\n.actions .action.mat-mini-fab {\n  width: 22%;\n  height: 22%;\n  min-width: 30px;\n  min-height: 30px;\n  max-width: 42px;\n  max-height: 42px;\n  line-height: 15px !important;\n}\n\n.actions .action.mat-mini-fab .mat-button-wrapper {\n  padding: 4px 0;\n  line-height: 15px !important;\n}\n\n:host:hover .file-name {\n  overflow: visible;\n  white-space: normal;\n  word-wrap: break-word;\n}\n\n:host.preview {\n  display: inline-block;\n  position: relative;\n  margin-right: 10px;\n  border: 1px #DDD solid;\n  vertical-align: top;\n  border-radius: 3px;\n}\n\n:host.preview:last-child {\n  margin-right: 0;\n}\n\n:host.preview:hover .actions,\n:host.preview:focus .actions {\n  display: block;\n}\n\n:host.preview img {\n  display: block;\n  border-radius: 3px;\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n}\n\n:host ::ng-deep .mat-button-wrapper {\n  padding: 0;\n  line-height: 15px !important;\n}\n\n:host ::ng-deep .spinner {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-left: -25%;\n  margin-top: -25%;\n}\n\n@media only screen and (max-width: 550px) {\n  .actions {\n    display: block;\n    background: none;\n  }\n}\n\n",'@import "variables";\n\n\n@mixin apply-to($ltgt, $device) {\n  $extrema: null;\n  $boundary-target: null;\n  $delta: null;\n\n  @if $ltgt == less-than {\n    $extrema: max;\n    $delta: -1;\n  } @else if $ltgt == greater-than {\n    $extrema: min;\n    $delta: +1;\n  }\n\n  @if $device == phone {\n    @if $ltgt == less-than {\n      $boundary-target: $phone-width-max;\n    } @else if $ltgt == greater-than {\n      $boundary-target: $tablet-width-min;\n    }\n  } @else if $device == tablet {\n    @if $ltgt == less-than {\n      $boundary-target: $tablet-width-min;\n    } @else if $ltgt == greater-than {\n      $boundary-target: $tablet-width-max;\n    }\n  } @else if $device == desktop {\n    $boundary-target: $desktop-width-min;\n  }\n\n  @media only screen and (#{$extrema}-width: $boundary-target) {\n    @content;\n  }\n}\n\n@mixin phone {\n  @media only screen and (max-width: #{$phone-width-max}) {\n    @content;\n  }\n}\n\n@mixin tablet {\n  @media only screen and (min-width: #{$tablet-width-min}) and (max-width: #{$tablet-width-max}) {\n    @content;\n  }\n}\n\n@mixin desktop {\n  @media only screen and (min-width: #{$desktop-width-min}) {\n    @content;\n  }\n}\n'],sourceRoot:""}])},"../node_modules/css-loader/index.js??ref--3-1!../node_modules/postcss-loader/lib/index.js??ref--3-2!../node_modules/resolve-url-loader/index.js??ref--3-3!../node_modules/sass-loader/lib/loader.js??ref--3-4!./components/fs-file-previews/fs-file-previews.component.scss":function(e,t,n){t=e.exports=n("../node_modules/css-loader/lib/css-base.js")(!0),t.push([e.i,".queue {\n  position: relative;\n  display: block;\n}\n\n","",{version:3,sources:["/Users/mendor/work/fs-file/src/components/fs-file-previews/src/components/fs-file-previews/fs-file-previews.component.scss","/Users/mendor/work/fs-file/src/components/fs-file-previews/fs-file-previews.component.scss"],names:[],mappings:"AAAA;EACE,mBAAA;EACA,eAAA;CCCD",file:"fs-file-previews.component.scss",sourcesContent:[".queue {\n  position: relative;\n  display: block;\n}\n",".queue {\n  position: relative;\n  display: block;\n}\n\n"],sourceRoot:""}])},"../node_modules/css-loader/lib/css-base.js":function(e,t){function n(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=i(o);return[n].concat(o.sources.map(function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"})).concat([r]).join("\n")}return[n].join("\n")}function i(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var i=n(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<e.length;o++){var s=e[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},"./classes/file-processor.ts":function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function s(e){try{p(i.next(e))}catch(e){r(e)}}function a(e){try{p(i.throw(e))}catch(e){r(e)}}function p(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(s,a)}p((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;p;)try{if(o=1,r&&(s=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(r,n[1])).done)return s;switch(r=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return p.label++,{value:n[1],done:!1};case 5:p.label++,r=n[1],n=[0];continue;case 7:n=p.ops.pop(),p.trys.pop();continue;default:if(s=p.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){p=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){p.label=n[1];break}if(6===n[0]&&p.label<s[1]){p.label=s[1],s=n;break}if(s&&p.label<s[2]){p.label=s[2],p.ops.push(n);break}s[2]&&p.ops.pop(),p.trys.pop();continue}n=t.call(e,p)}catch(e){n=[6,e],r=0}finally{o=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,s,a,p={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n("fileapi");n("fileapi/plugins/FileAPI.exif.js");var s=n("rxjs/Observable"),a=n("rxjs/operators/switchMap"),p=n("rxjs/observable/of");n("rxjs/add/observable/fromPromise");var c=n("./models/index.ts"),l=n("./helpers/index.ts"),f=function(){function e(){}return e.prototype.process=function(e,t){var n=this,i=!0,o=new c.ProcessConfig(t);Array.isArray(e)||(e=[e],i=!1);var r=[];return e.forEach(function(e){if(e.typeImage){var t=new Promise(function(t,i){n.applyTransforms(e,t,i,o)});r.push(t)}else r.push(e)}),s.Observable.fromPromise(Promise.all(r)).pipe(a.switchMap(function(e){return!i&&e[0]?p.of(e[0]):p.of(e)}))},e.prototype.getImageInfo=function(e){return new Promise(function(t,n){r.getInfo(e.file,function(e,i){e?n(e):t(i)})})},e.prototype.transformFile=function(e,t,n){return i(this,void 0,void 0,function(){var n=this;return o(this,function(i){return[2,new Promise(function(i,o){r.Image.transform(e.file,[t],!0,function(r,s){if(!r&&s[0]){var a=void 0;a=l.ScaleExifImage(s[0],e.exifInfo.Orientation),a.toBlob(function(t){e.file=new File([t],e.name,{type:e.type}),n.getImageInfo(e).then(function(t){e.parseInfo(t),i(e)}).catch(function(t){o({error:t,originFile:e})})},t.type,a.quality)}else o(r)})})]})})},e.prototype.applyTransforms=function(e,t,n,r){return i(this,void 0,void 0,function(){var i,s,a,p;return o(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,this.getImageInfo(e)];case 1:return i=o.sent(),e.parseInfo(i),s=this.generateTransformParams(e,r),[4,this.transformFile(e,s,r)];case 2:return a=o.sent(),t(a),[3,4];case 3:return p=o.sent(),n(p),[3,4];case 4:return[2]}})})},e.prototype.generateTransformParams=function(e,t){var n={};return n.type=t.format?"image/"+t.format:e.type,n.maxWidth=t.width,n.maxHeight=t.height,void 0!==t.quality&&(n.quality=t.quality||1),n},e.prototype.alertImageProcessingError=function(e){alert("File "+e.name+" can't be processed as image. File was rejected")},e}();t.FileProcessor=f},"./classes/index.ts":function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("./classes/file-processor.ts")),i(n("./classes/input-processor.ts"))},"./classes/input-processor.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("@angular/core"),o=n("fileapi"),r=n("./models/fs-file.ts"),s=function(){function e(e,t){this.select=new i.EventEmitter,this.initForElement(e),this.initDragNDropForElement(t)}return e.prototype.initForElement=function(e){e&&(this.inputEl=e.nativeElement,this.onChanges())},e.prototype.initDragNDropForElement=function(e){e&&(this.containerEl=e.nativeElement,this.onDrop())},e.prototype.onChanges=function(){var e=this;o.event.on(this.inputEl,"change",function(t){var n=o.getFiles(t);e.inputEl.value=null,e.selectFiles(n)})},e.prototype.onDrop=function(){var e=this;o.event.on(this.containerEl,"drop",function(t){var n=o.getFiles(t);e.inputEl.value=null,e.selectFiles(n)})},e.prototype.selectFiles=function(e){e=e.map(function(e){return new r.FsFile(e)}),1===e.length&&(e=e[0]),this.select.emit(e)},e}();t.InputProcessor=s},"./components/fs-file-drag-base/fs-file-drag-base.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n("@angular/core"),s=function(){function e(e){this.el=e,this.fileOverTarget=!1}return e.prototype.onDragOverElement=function(e){this.el.nativeElement.contains(e.target)&&(this.fileOverTarget=!0)},e.prototype.onDrop=function(e){this.fileOverTarget&&(e.preventDefault(),e.stopPropagation(),this.fileOverTarget=!1)},e.prototype.onDragOver=function(e){this.fileOverTarget&&(e.preventDefault(),e.stopPropagation(),this.el.nativeElement.contains(e.target)||(this.fileOverTarget=!1))},i([r.HostBinding("class.dragover"),o("design:type",Object)],e.prototype,"fileOverTarget",void 0),i([r.HostListener("dragenter",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onDragOverElement",null),i([r.HostListener("window:drop",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onDrop",null),i([r.HostListener("window:dragover",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],e.prototype,"onDragOver",null),e=i([r.Component({selector:"fs-file-drag-base",template:""}),o("design:paramtypes",[r.ElementRef])],e)}();t.FsFileDragBaseComponent=s},"./components/fs-file-drag-base/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-drag-base/fs-file-drag-base.ts"))},"./components/fs-file-picker/fs-file-picker.component.html":function(e,t){e.exports='<div class="label"\n     [ngStyle]="{\'width.px\': previewWidth || 150}">\n  <ng-content select="[fs-file-label]"></ng-content>\n</div>\n<fs-file-preview class="preview"\n                 *ngIf="file; else preview"\n                 (remove)="removeFile($event)"\n                 [file]="file"\n                 [previewWidth]="previewWidth"\n                 [previewHeight]="previewHeight">\n  <ng-template fs-file-preview-action placement="bottom-left" action="remove" tooltip="Remove">\n    <mat-icon>close</mat-icon>\n  </ng-template>\n  <ng-template fs-file-preview-action placement="bottom-right" tooltip="Reupload">\n      <fs-file  (select)="selectFile($event)"\n                [imageWidth]="imageWidth"\n                [imageHeight]="imageHeight"\n                [imageQuality]="imageQuality">\n        <mat-icon>cloud_upload</mat-icon></fs-file>\n  </ng-template>\n</fs-file-preview>\n\n<ng-template #preview>\n    <fs-file  (select)="selectFile($event)"\n              [imageWidth]="imageWidth"\n              [imageHeight]="imageHeight"\n              [imageQuality]="imageQuality">\n    <div class="select">\n      <mat-icon>cloud_upload</mat-icon>\n      <div class="instruction">{{instruction}}</div>\n      <div class="mat-raised-button mat-primary">Upload</div>\n    </div>\n  </fs-file>\n</ng-template>\n\n'},"./components/fs-file-picker/fs-file-picker.component.scss":function(e,t,n){var i=n("../node_modules/css-loader/index.js??ref--3-1!../node_modules/postcss-loader/lib/index.js??ref--3-2!../node_modules/resolve-url-loader/index.js??ref--3-3!../node_modules/sass-loader/lib/loader.js??ref--3-4!./components/fs-file-picker/fs-file-picker.component.scss");e.exports="string"==typeof i?i:i.toString()},"./components/fs-file-picker/fs-file-picker.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n("@angular/core"),a=n("./components/fs-file-drag-base/index.ts"),p=n("./classes/index.ts"),c=n("./models/index.ts"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.el=t,n._processor=new p.InputProcessor,n._accept=[],n.previewWidth=150,n.previewHeight=150,n.select=new s.EventEmitter,n.remove=new s.EventEmitter,n.instruction="Drag & Drop your file or use the button below",n}return i(t,e),Object.defineProperty(t.prototype,"previewUrl",{set:function(e){this.file=new c.FsFile(new File([""],e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{set:function(e){this.file=new c.FsFile(new File([""],e))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accept",{get:function(){return this._accept.join(", ")||"*"},set:function(e){this._accept=this._accept.concat(e.split(","))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.selectFile=function(e){this.file=e,this.select.emit(e)},t.prototype.removeFile=function(e){this.file=void 0,this.remove.emit(this.file)},o([s.Input(),r("design:type",Object)],t.prototype,"imageWidth",void 0),o([s.Input(),r("design:type",Object)],t.prototype,"imageHeight",void 0),o([s.Input(),r("design:type",Object)],t.prototype,"imageQuality",void 0),o([s.Input("previewUrl"),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"previewUrl",null),o([s.Input("name"),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"name",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"accept",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"disabled",null),o([s.Input(),r("design:type",Object)],t.prototype,"previewWidth",void 0),o([s.Input(),r("design:type",Object)],t.prototype,"previewHeight",void 0),o([s.Output(),r("design:type",Object)],t.prototype,"select",void 0),o([s.Output(),r("design:type",Object)],t.prototype,"remove",void 0),o([s.ViewChild("fileInput"),r("design:type",Object)],t.prototype,"fileInput",void 0),t=o([s.Component({selector:"fs-file-picker",template:n("./components/fs-file-picker/fs-file-picker.component.html"),styles:[n("./components/fs-file-picker/fs-file-picker.component.scss")]}),r("design:paramtypes",[s.ElementRef])],t)}(a.FsFileDragBaseComponent);t.FsFilePickerComponent=l},"./components/fs-file-picker/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-picker/fs-file-picker.component.ts"))},"./components/fs-file-preview-base/fs-file-preview-base.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n("@angular/core"),s=n("./directives/index.ts"),a=function(){function e(){this.actions=[],this.actionsTemplate=[]}return Object.defineProperty(e.prototype,"actionsParams",{set:function(e){var t=e.toArray().map(function(e,t){var n=Object.assign({},e);return n.index=t,n.forTypes&&!Array.isArray(n.forTypes)&&(n.forTypes=n.forTypes.split(",").map(function(e){return e.trim()})),n});(n=this.actions).push.apply(n,t);var n},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionsTemplateRefs",{set:function(e){(t=this.actionsTemplate).push.apply(t,e.toArray());var t},enumerable:!0,configurable:!0}),i([r.ContentChildren(s.FsFilePreviewActionDirective),o("design:type",r.QueryList),o("design:paramtypes",[r.QueryList])],e.prototype,"actionsParams",null),i([r.ContentChildren(s.FsFilePreviewActionDirective,{read:r.TemplateRef}),o("design:type",r.QueryList),o("design:paramtypes",[r.QueryList])],e.prototype,"actionsTemplateRefs",null),e=i([r.Component({selector:"fs-file-previews-base",template:""}),o("design:paramtypes",[])],e)}();t.FsFilePreviewsBaseComponent=a},"./components/fs-file-preview-base/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-preview-base/fs-file-preview-base.ts"))},"./components/fs-file-preview/fs-file-preview.component.html":function(e,t){e.exports='<div [style.width.px]="previewWidth" [style.height.px]="previewHeight" class="preview-container">\n\n  \x3c!-- Image container --\x3e\n  <ng-container *ngIf="file.typeImage; else nonImage">\n    <img [src]="preview" *ngIf="preview">\n    <mat-spinner class="spinner" *ngIf="file.progress" [diameter]="previewWidth/2"></mat-spinner>\n  </ng-container>\n\n  \x3c!-- Non image container --\x3e\n  <ng-template #nonImage>\n    <div class="file-ext">{{file.extension}}</div>\n    <div class="file-name" [matTooltip]="file.name">{{file.name}}</div>\n  </ng-template>\n</div>\n\n\x3c!-- Actions --\x3e\n<div class="actions">\n  <button type="button" class="action" mat-mini-fab color="primary"\n          *ngFor="let action of filteredActions"\n          [ngClass]="getActionClasses(action)"\n          [matTooltip]="action.tooltip"\n          (click)="callAction(action)">\n    <ng-template [ngTemplateOutlet]="actionsTemplate[action.index]"></ng-template>\n  </button>\n</div>\n'},"./components/fs-file-preview/fs-file-preview.component.scss":function(e,t,n){var i=n("../node_modules/css-loader/index.js??ref--3-1!../node_modules/postcss-loader/lib/index.js??ref--3-2!../node_modules/resolve-url-loader/index.js??ref--3-3!../node_modules/sass-loader/lib/loader.js??ref--3-4!./components/fs-file-preview/fs-file-preview.component.scss");e.exports="string"==typeof i?i:i.toString()},"./components/fs-file-preview/fs-file-preview.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){
var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n("@angular/core"),a=n("fileapi"),p=n("./models/index.ts"),c=n("./components/fs-file-preview-base/index.ts"),l=n("./helpers/index.ts"),f=function(e){function t(){var t=e.call(this)||this;return t.previewWidth=150,t.previewHeight=150,t.remove=new s.EventEmitter,t.filteredActions=[],t}return i(t,e),Object.defineProperty(t.prototype,"_actions",{set:function(e){(t=this.actions).push.apply(t,e);var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_actionsTemplate",{set:function(e){(t=this.actionsTemplate).push.apply(t,e);var t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"_file",{set:function(e){this.file=e,this.generateFilePreview(e)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.cleanActions()},t.prototype.getActionClasses=function(e){return e.placement?[e.placement]:[]},t.prototype.callAction=function(e){e.click&&e.click.emit(this.file),"remove"==e.action&&this.remove.emit(this.file)},t.prototype.generateFilePreview=function(e){var t=this;if(e.url)return void(this.preview=e.url);this.file.typeImage&&(e.progress=!0,a.Image.transform(e.file,[{width:this.previewWidth,height:this.previewHeight,preview:!0}],!0,function(n,i){if(!n&&i[0]){var o=l.ScaleExifImage(i[0],e.exifInfo.Orientation,t.previewWidth,t.previewHeight);t.preview=o.toDataURL(e.type),e.progress=!1}else alert("Image preview error for file "+e.name),e.progress=!1}))},t.prototype.cleanActions=function(){for(var e in this.actions)if(this.actions.hasOwnProperty(e)&&this.actions[e].forTypes)for(var t=this.file.type.split("/"),n=t[0],i=t[1],o=this.actions[e].forTypes,r=0;r<o.length;r++){var s=o[r].split("/"),a=s[0],p=s[1],c=a===n&&(p===i||"*"===p);if(c){this.filteredActions.push(this.actions[e]);break}}else this.filteredActions.push(this.actions[e])},o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"_actions",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"_actionsTemplate",null),o([s.Input(),r("design:type",Object)],t.prototype,"previewWidth",void 0),o([s.Input(),r("design:type",Object)],t.prototype,"previewHeight",void 0),o([s.Input("file"),r("design:type",p.FsFile),r("design:paramtypes",[p.FsFile])],t.prototype,"_file",null),o([s.Output(),r("design:type",Object)],t.prototype,"remove",void 0),t=o([s.Component({selector:"fs-file-preview",template:n("./components/fs-file-preview/fs-file-preview.component.html"),styles:[n("./components/fs-file-preview/fs-file-preview.component.scss")]}),r("design:paramtypes",[])],t)}(c.FsFilePreviewsBaseComponent);t.FsFilePreviewComponent=f},"./components/fs-file-preview/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-preview/fs-file-preview.component.ts"))},"./components/fs-file-previews/fs-file-previews.component.html":function(e,t){e.exports='<fs-file-preview\n  *ngFor="let file of files"\n  [file]="file"\n  [_actions]="actions"\n  [_actionsTemplate]="actionsTemplate"\n  [previewWidth]="previewWidth"\n  [previewHeight]="previewHeight"\n  (remove)="removeFile($event)"\n  class="preview">\n</fs-file-preview>\n'},"./components/fs-file-previews/fs-file-previews.component.scss":function(e,t,n){var i=n("../node_modules/css-loader/index.js??ref--3-1!../node_modules/postcss-loader/lib/index.js??ref--3-2!../node_modules/resolve-url-loader/index.js??ref--3-3!../node_modules/sass-loader/lib/loader.js??ref--3-4!./components/fs-file-previews/fs-file-previews.component.scss");e.exports="string"==typeof i?i:i.toString()},"./components/fs-file-previews/fs-file-previews.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n("@angular/core"),a=n("./components/fs-file-preview-base/index.ts"),p=function(e){function t(){var t=e.call(this)||this;return t.previewWidth=150,t.previewHeight=150,t.queue=!0,t}return i(t,e),t.prototype.ngOnInit=function(){},t.prototype.removeFile=function(e){var t=this.files.indexOf(e);t>-1&&this.files.splice(t,1)},o([s.Input(),r("design:type",Object)],t.prototype,"files",void 0),o([s.Input(),r("design:type",Object)],t.prototype,"previewWidth",void 0),o([s.Input(),r("design:type",Object)],t.prototype,"previewHeight",void 0),o([s.HostBinding("class.queue"),r("design:type",Object)],t.prototype,"queue",void 0),t=o([s.Component({selector:"fs-file-previews",template:n("./components/fs-file-previews/fs-file-previews.component.html"),styles:[n("./components/fs-file-previews/fs-file-previews.component.scss")],encapsulation:s.ViewEncapsulation.None}),r("design:paramtypes",[])],t)}(a.FsFilePreviewsBaseComponent);t.FsFilePreviewsComponent=p},"./components/fs-file-previews/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file-previews/fs-file-previews.component.ts"))},"./components/fs-file/fs-file.component.html":function(e,t){e.exports='<label (click)="fileInput.click()">\n  <ng-content></ng-content>\n</label>\n<input type="file"\n       [hidden]="true"\n       [disabled]="disabled"\n       [multiple]="multiple"\n       [attr.accept]="accept"\n       #fileInput\n>\n'},"./components/fs-file/fs-file.component.ts":function(e,t,n){"use strict";var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),o=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},r=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var s=n("@angular/core"),a=n("./components/fs-file-drag-base/index.ts"),p=n("./classes/index.ts"),c=n("rxjs/operators"),l=n("rxjs/observable/of"),f=n("lodash"),d=function(e){function t(t){var n=e.call(this,t)||this;n.el=t,n._inputProcessor=new p.InputProcessor,n._accept=[],n._processOptions={width:void 0,height:void 0,quality:1},n._autoProcess=!1;var i=new p.FileProcessor;return n.select=n._inputProcessor.select.pipe(c.switchMap(function(e){return n._multiple&&!f.isArray(e)&&(e=[e]),n._autoProcess?i.process(e,n._processOptions):l.of(e)})),n}return i(t,e),Object.defineProperty(t.prototype,"multiple",{get:function(){return this._multiple},set:function(e){this._multiple="boolean"==typeof e?e:"true"===e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"accept",{get:function(){return this._accept.join(", ")||"*"},set:function(e){this._accept=this._accept.concat(e.split(","))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._disabled},set:function(e){this._disabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageWidth",{set:function(e){void 0!==e&&(this._processOptions.width=+e,this._autoProcess=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageHeight",{set:function(e){void 0!==e&&(this._processOptions.height=+e,this._autoProcess=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageQuality",{set:function(e){var t=parseFloat(e);isNaN(t)||(this._processOptions.quality=t,this._autoProcess=!0)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this._inputProcessor.initForElement(this.fileInput),this._inputProcessor.initDragNDropForElement(this.el)},o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"multiple",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"accept",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"disabled",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageWidth",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageHeight",null),o([s.Input(),r("design:type",Object),r("design:paramtypes",[Object])],t.prototype,"imageQuality",null),o([s.Output("select"),r("design:type",s.EventEmitter)],t.prototype,"select",void 0),o([s.ViewChild("fileInput"),r("design:type",Object)],t.prototype,"fileInput",void 0),t=o([s.Component({selector:"fs-file",template:n("./components/fs-file/fs-file.component.html"),styles:[":host label { cursor: pointer }"]}),r("design:paramtypes",[s.ElementRef])],t)}(a.FsFileDragBaseComponent);t.FsFileComponent=d},"./components/fs-file/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./components/fs-file/fs-file.component.ts"))},"./components/index.ts":function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("./components/fs-file/index.ts")),i(n("./components/fs-file-previews/index.ts")),i(n("./components/fs-file-preview/index.ts")),i(n("./components/fs-file-picker/index.ts")),i(n("./components/fs-file-drag-base/index.ts")),i(n("./components/fs-file-preview-base/index.ts"))},"./directives/fs-file-preview-action.directive.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var r=n("@angular/core"),s=function(){function e(){this.index=null,this.click=new r.EventEmitter}return i([r.Input(),o("design:type",String)],e.prototype,"placement",void 0),i([r.Input(),o("design:type",String)],e.prototype,"tooltip",void 0),i([r.Input(),o("design:type",String)],e.prototype,"action",void 0),i([r.Input("for-types"),o("design:type",Object)],e.prototype,"forTypes",void 0),i([r.Output(),o("design:type",Object)],e.prototype,"click",void 0),e=i([r.Directive({selector:"[fs-file-preview-action]"})],e)}();t.FsFilePreviewActionDirective=s},"./directives/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./directives/fs-file-preview-action.directive.ts"))},"./fs-file.module.ts":function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0});var o=n("@angular/core"),r=n("@angular/common"),s=n("@angular/material"),a=n("@firestitch/common"),p=n("./components/index.ts"),c=n("./directives/index.ts"),l=function(){function e(){}return t=e,e.forRoot=function(){return{ngModule:t,providers:[]}},e=t=i([o.NgModule({imports:[r.CommonModule,a.FsCommonModule,s.MatIconModule,s.MatTooltipModule,s.MatProgressSpinnerModule,s.MatButtonModule],exports:[p.FsFileComponent,p.FsFilePreviewsComponent,p.FsFilePreviewComponent,c.FsFilePreviewActionDirective,p.FsFilePickerComponent],entryComponents:[],declarations:[p.FsFileComponent,p.FsFilePreviewsComponent,p.FsFilePreviewComponent,c.FsFilePreviewActionDirective,p.FsFileDragBaseComponent,p.FsFilePreviewsBaseComponent,p.FsFilePickerComponent],providers:[]})],e);var t}();t.FsFileModule=l},"./helpers/index.ts":function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("./helpers/scale-exif-image.ts")),i(n("./helpers/is-image-type.ts"))},"./helpers/is-image-type.ts":function(e,t,n){"use strict";function i(e){return e.match(/^image\/(gif|jpe?g|pjpeg|png|svg\+xml|tiff|vnd\.microsoft\.icon|vnd\.wap\.wbmp|webp)/i)}Object.defineProperty(t,"__esModule",{value:!0}),t.isImageType=i},"./helpers/scale-exif-image.ts":function(e,t,n){"use strict";function i(e,t,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var o=e.width,r=e.height;n&&n<o&&(o=n),i&&i<r&&(r=i);var s=document.createElement("canvas");s.width=o,s.height=r;var a=s.getContext("2d");switch(t){case 2:case 4:case 5:case 7:return a.scale(-1,1),a.drawImage(e,0,0,o,r,-o,0,o,r),s;default:return e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleExifImage=i},"./index.ts":function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("./fs-file.module.ts")),i(n("./components/index.ts")),i(n("./classes/index.ts")),i(n("./directives/index.ts"))},"./models/fs-file.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("./helpers/index.ts"),o=function(){function e(e,t){this.progress=!1,this.exifInfo={},this.file=e,t&&(this.fileOptions=Object.assign({},t))}return Object.defineProperty(e.prototype,"file",{get:function(){return this._file},set:function(e){if(this._file=e,this.size=e.size,e.name.match(/^http/)){this.url=e.name;var t=e.name.match(/(jpe?g|png|gif|tiff?)$/i);t&&(this.type="image/"+t[1])}else this.name=e.name,this.type=e.type},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e;var t=e.split(".");t.length>1&&(this.extension=t[t.length-1])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fileOptions",{get:function(){return this._fileOptions},set:function(e){this._fileOptions=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"typeImage",{get:function(){return i.isImageType(this.type)},enumerable:!0,configurable:!0}),e.prototype.parseInfo=function(e){this.imageWidth=e.width,this.imageHeight=e.height,this.exifInfo=e.exif},e.prototype.toObject=function(){return{name:this._name,type:this.type,size:this.size,progress:this.progress,extension:this.extension,typeImage:this.typeImage,imageWidth:this.imageWidth,imageHeight:this.imageHeight}},e}();t.FsFile=o},"./models/index.ts":function(e,t,n){"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n("./models/process-config.ts")),i(n("./models/fs-file.ts"))},"./models/process-config.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){void 0===e&&(e={}),this.parseConfig(e)}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){void 0!==e&&(this._width=+e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){void 0!==e&&(this._height=+e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(e){var t=parseFloat(e);isNaN(t)||(this._quality=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"format",{get:function(){return this._format},set:function(e){["jpg","png"].indexOf(e)>-1&&(this._format=e)},enumerable:!0,configurable:!0}),e.prototype.parseConfig=function(e){this.width=e.width,this.height=e.height,this.quality=e.quality,this.format=e.format},e}();t.ProcessConfig=i},"@angular/common":function(e,t){e.exports=require("@angular/common")},"@angular/core":function(e,t){e.exports=require("@angular/core")},"@angular/material":function(e,t){e.exports=require("@angular/material")},"@firestitch/common":function(e,t){e.exports=require("@firestitch/common")},fileapi:function(e,t){e.exports=require("fileapi")},"fileapi/plugins/FileAPI.exif.js":function(e,t){e.exports=require("fileapi/plugins/FileAPI.exif.js")},lodash:function(e,t){e.exports=require("lodash")},"rxjs/Observable":function(e,t){e.exports=require("rxjs/Observable")},"rxjs/add/observable/fromPromise":function(e,t){e.exports=require("rxjs/add/observable/fromPromise")},"rxjs/observable/of":function(e,t){e.exports=require("rxjs/observable/of")},"rxjs/operators":function(e,t){e.exports=require("rxjs/operators")},"rxjs/operators/switchMap":function(e,t){e.exports=require("rxjs/operators/switchMap")}})});